---
title: Skilltree Test Page
description: Test page for the skill tree that will eventually make it to the Home page
date: 2024-10-23 00:00:00+0000
weight: 100
---
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <!-- Include any required styles here -->
  <style>
    /* Your existing styles */
    svg {
      display: block;
      width: 100%;
      height: auto;
    }
  </style>
</head>
<body>
  <div id="container"></div>
  <script type="module">
    import * as d3 from "https://cdn.jsdelivr.net/npm/d3@7/+esm";

    const container = d3.select("#container");

    const width = parseInt(container.style("width"), 10);
    const height = parseInt(container.style("width"), 10);

    const svg = container.append("svg")
    .attr("overflow", "visible")
    .attr("position", "relative")
    .attr("z-index", "2")
    .attr("viewBox", [-width/2, -height/2, width, height]);

    const n = 20;
    const nodes = Array.from({ length: n * n }, (_, i) => ({ index: i }));
    const links = [];

    for (let y = 0; y < n; ++y) {
      for (let x = 0; x < n; ++x) {
        if (y > 0) links.push({ source: (y - 1) * n + x, target: y * n + x });
        if (x > 0) links.push({ source: y * n + (x - 1), target: y * n + x });
      }
    }

    let simulation = d3.forceSimulation(nodes)
      .force("charge", d3.forceManyBody().strength(-40))
      .force("link", d3.forceLink(links).strength(1).distance(10).iterations(10))
      .force("x", d3.forceX())
      .force("y", d3.forceY())
      .on("tick", ticked);

    const link = svg.append("g")
      .attr("stroke", "currentColor")
      .attr("stroke-opacity", 0.3)
      .selectAll()
      .data(links)
      .join("line");

    const node = svg.append("g")
      .attr("fill", "currentColor")
      .attr("stroke", "var(--vp-c-bg-alt)")
      .selectAll()
      .data(nodes)
      .join("circle")
      .attr("r", 2.5);

    function ticked() {
      node.attr("cx", (d) => d.x).attr("cy", (d) => d.y);
      link.attr("x1", (d) => d.source.x).attr("y1", (d) => d.source.y);
      link.attr("x2", (d) => d.target.x).attr("y2", (d) => d.target.y);
    }

    const drag = d3.drag()
    .subject(({x, y}) => simulation.find(x - width/2, y - height/2, 40))
    .on("start", dragstarted)
    .on("drag", dragged)
    .on("end", dragended);

    function dragstarted(event) {
      if (!event.active) simulation.alphaTarget(0.3).restart();
      event.subject.fx = event.subject.x;
      event.subject.fy = event.subject.y;
    }

    function dragged(event) {
      event.subject.fx = event.x;
      event.subject.fy = event.y;
    }

    function dragended(event) {
      if (!event.active) simulation.alphaTarget(0);
      event.subject.fx = null;
      event.subject.fy = null;
    }

    // Apply the drag behavior to the SVG
    svg.call(drag);

  </script>
</body>
</html>
